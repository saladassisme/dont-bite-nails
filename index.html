<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜²å’¬æŒ‡ç”²ç›‘æ§å™¨</title>
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    
    <!-- ç›´æ¥åœ¨è¿™é‡Œå†™ CSSï¼Œä¸å†å¼•ç”¨å¤–éƒ¨æ–‡ä»¶ -->
    <style>
        /* === æŠŠ style.css é‡Œçš„æ‰€æœ‰ä»£ç éƒ½ç²˜è´´åˆ°è¿™é‡Œ === */
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .lang-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 15px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .lang-btn:hover {
            background: #e0e0e0;
        }

        h1 { margin-top: 20px; margin-bottom: 10px; }

        .container {
            position: relative;
            margin-top: 10px;
            text-align: center;
            width: 100%;
            max-width: 680px;
        }

        .video-wrapper {
            position: relative;
            width: 640px;
            height: 480px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            margin: 0 auto;
        }

        video, canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            transform: scaleX(-1); object-fit: cover;
        }

        .tip-text {
            margin-top: 15px; margin-bottom: 5px;
            color: #666; font-size: 14px;
            background: #e8e8e8;
            display: inline-block;
            padding: 5px 15px; border-radius: 20px;
        }

        #status { font-weight: bold; margin-bottom: 10px; font-size: 18px; }

        .controls {
            margin-top: 15px; display: flex; justify-content: center; gap: 15px;
            padding-bottom: 30px; flex-wrap: wrap; 
        }

        .alert-mode { border: 6px solid #ff4444; box-sizing: border-box; }

        .coffee-btn {
            background-color: #FFDD00 !important;
            color: #000 !important;
            font-weight: bold;
        }

        /* === å¼¹çª—æ ·å¼ === */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 100; 
            left: 0; top: 0;
            width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.5); 
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto; 
            padding: 25px;
            border-radius: 15px;
            width: 90%;          
            max-width: 350px;    
            text-align: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: popIn 0.3s ease;
        }

        .qr-img {
            width: 100%;        
            max-width: 260px;   
            height: auto;       
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
            display: inline-block;
        }

        .close-btn {
            position: absolute;
            top: 10px; right: 15px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-btn:hover { color: #000; }

        @keyframes popIn {
            from {transform: scale(0.8); opacity: 0;}
            to {transform: scale(1); opacity: 1;}
        }
    </style>
</head>

<body>

    <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® (å³ä¸Šè§’) -->
    <button id="langSwitch" class="lang-btn">ğŸ‡ºğŸ‡¸ English</button>

    <h1 data-i18n="title">ğŸš« ä¸è¦å’¬æŒ‡ç”²ï¼</h1>
    
    <div class="container">
        <p id="status" data-i18n="status_wait">â³ ç­‰å¾…æ‘„åƒå¤´æˆæƒ...</p>
        
        <div class="video-wrapper">
            <video id="webcam" autoplay playsinline></video>
            <canvas id="output_canvas"></canvas>
        </div>

        <p class="tip-text" data-i18n="tip">
            ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹ <b>"å¼€å¯æ‚¬æµ®å°çª—"</b> å¯éšè—æ­¤é¡µé¢ï¼Œåå°ç»§ç»­ç›‘æ§
        </p>

        <div class="controls">
            <!-- ç”»ä¸­ç”»æŒ‰é’® -->
            <button id="pipButton" class="mdc-button mdc-button--outlined" style="display: none;">
                <span class="mdc-button__label" data-i18n="btn_pip">ğŸ“º å¼€å¯æ‚¬æµ®å°çª—</span>
            </button>

            <!-- ç›‘æ§å¼€å…³ -->
            <button id="enableWebcamButton" class="mdc-button mdc-button--raised">
                <span class="mdc-button__label" data-i18n="btn_start">å¼€å¯æ‘„åƒå¤´ç›‘æ§</span>
            </button>

            <!-- æ”¯æŒä½œè€…æŒ‰é’® (æ™ºèƒ½) -->
            <button id="donateButton" class="mdc-button mdc-button--raised coffee-btn">
                <span class="mdc-button__label" data-i18n="btn_donate">ğŸ§§ æ”¯æŒä½œè€…</span>
            </button>
        </div>
    </div>

    <!-- äºŒç»´ç å¼¹çª— (é»˜è®¤éšè—) -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 data-i18n="modal_title">æ„Ÿè°¢ä½ çš„æ”¯æŒï¼â¤ï¸</h3>
            <!-- è®°å¾—ç¡®ä¿æ–‡ä»¶å¤¹é‡Œæœ‰ qr.jpg -->
            <img src="qr.jpg" alt="æ”¶æ¬¾ç " class="qr-img">
            <p data-i18n="modal_desc">å¾®ä¿¡ / æ”¯ä»˜å® æ‰«ä¸€æ‰«</p>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>

